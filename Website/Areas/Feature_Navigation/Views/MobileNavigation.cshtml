@using Constellation.Feature.Navigation.Models
@inherits Constellation.Foundation.Mvc.EditorCompatibleView<Constellation.Feature.Navigation.Models.NavigationMenu>
<nav class="header__mobile-nav" aria-label="Mobile Nav">
	<ul>
		@foreach (var node in Model.Children)
		{
			switch (node)
			{
				case NavigationLink link:

					<li class="header__mobile-item header__mobile-item--main-link">
						<a href="@link.LinkUrl" target="@link.LinkTarget">
							@link.GetBestLinkText()
						</a>
					</li>
					break;
				case LinkGroup group:
					<li class="header__mobile-item">
						<button aria-haspopup="true" aria-expanded="false">
							@group.DisplayName
						</button>
						@if (group.Children.Count > 0)
						{
							<ul class="header__mobile-inner-nav">
								<li class="header__mobile-item header__mobile-item--back">
									<button>
										Back
									</button>
								</li>
								@foreach (var child in group.Children)
								{
									if (child is NavigationLink childLink)
									{
										<li class="header__mobile-item header__mobile-item--main-link">
											<a href="@childLink.LinkUrl" target="@childLink.LinkTarget">
												@childLink.GetBestLinkText()
											</a>
										</li>
									}
								}
							</ul>
						}
					</li>
					break;
			}
		}
	</ul>
</nav>